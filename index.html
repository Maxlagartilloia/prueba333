<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Generador de Posts â€¢ Locos por Aprender</title>
<meta name="description" content="App gratuita sin API: combina bancos de palabras y genera posts listos para redes con hook, beneficio, CTA y hashtags.">
<style>
:root{
  --bg:#0f0f12;--card:#15161a;--ink:#e9e9ef;--muted:#a8a8b3;--brand:#ff2d55;--stroke:#23242a;--accent:#00e0b8;
}
*{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0d0d10,#14151a);color:var(--ink);font:15px/1.55 Inter,system-ui,Segoe UI,Roboto,Arial}
header{padding:28px 16px;text-align:center;border-bottom:1px solid var(--stroke)}
h1{margin:2px 0 6px;font-size:22px} header p{margin:0;color:var(--muted)}
.wrap{max-width:1080px;margin:20px auto;padding:0 16px 48px}
.grid{display:grid;gap:16px;grid-template-columns:1fr}
@media(min-width:980px){.grid{grid-template-columns:360px 1fr}}
.panel{background:var(--card);border:1px solid var(--stroke);border-radius:14px;padding:16px}
h2{margin:0 0 10px;font-size:16px}
label{display:block;margin:10px 0 6px;color:var(--muted);font-size:13px}
input,select,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid var(--stroke);background:#0f1014;color:var(--ink);outline:none}
textarea{min-height:90px;resize:vertical}
.row{display:flex;gap:10px}.row>*{flex:1}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#1c1e24;border:1px solid var(--stroke);font-size:12px;color:var(--muted)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:11px 12px;border-radius:10px;border:1px solid var(--stroke);background:linear-gradient(180deg,#1d1f24,#191b20);color:var(--ink);cursor:pointer;font-weight:600;text-decoration:none}
.btn:hover{border-color:#2b2d36}.btn.primary{background:linear-gradient(180deg,var(--brand),#c51f48);border:none}
.sep{height:1px;background:var(--stroke);margin:12px 0}
.post{background:#101116;border:1px solid var(--stroke);border-radius:12px;padding:14px}
.post h3{margin:0 0 6px;font-size:14px;color:#dcdce8}
.muted{color:var(--muted);font-size:13px}
.tools{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}
.brand{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:8px}
.accent{color:var(--accent)}
.small{font-size:12px;color:var(--muted)}
.notice{background:#12131a;border:1px dashed #2e3040;padding:10px;border-radius:10px;color:#cfcfe6}
</style>
</head>
<body>
<header>
  <h1>Generador de Posts (sin API)</h1>
  <p>Hook + Beneficio + Prueba + Oferta + CTA + Hashtags â€¢ 100% navegador</p>
  <div class="brand"><span class="badge">by Locos por Aprender Â· Criss Lombeida AI Studio</span></div>
</header>

<div class="wrap grid">
  <section class="panel">
    <h2>ğŸ¯ Configura</h2>

    <label>Â¿QuÃ© vendes / Nicho?</label>
    <input id="nicho" placeholder="Ej: chocobananas artesanales / papelerÃ­a / ropa deportiva">

    <div class="row">
      <div>
        <label>Objetivo</label>
        <select id="objetivo">
          <option value="vender hoy">Vender hoy</option>
          <option value="generar comentarios">Generar comentarios</option>
          <option value="conseguir mensajes">Conseguir mensajes</option>
          <option value="atraer visitas">Atraer visitas</option>
          <option value="agendar pedidos">Agendar pedidos</option>
        </select>
      </div>
      <div>
        <label>Tono</label>
        <select id="tono">
          <option value="cercano">Cercano</option>
          <option value="energÃ©tico">EnergÃ©tico</option>
          <option value="elegante">Elegante</option>
          <option value="divertido">Divertido</option>
          <option value="autoridad">Autoridad</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label>NÂ° de posts</label>
        <select id="cantidad">
          <option>3</option><option selected>5</option><option>8</option><option>10</option>
        </select>
      </div>
      <div>
        <label>LÃ­mite de palabras por post</label>
        <select id="limite">
          <option>45</option><option selected>60</option><option>75</option>
        </select>
      </div>
    </div>

    <label>Palabras/frases propias (coma â€œ,â€ para separar)</label>
    <textarea id="custom" placeholder="hecho en casa, receta familiar, crujiente, entrega hoy, promo 2x1"></textarea>

    <div class="sep"></div>
    <div class="notice small">Tip: todo se ejecuta aquÃ­ mismo; tus palabras no se envÃ­an a ningÃºn servidor ni se guardan (salvo que marques â€œRecordar mis palabrasâ€).</div>

    <div class="row" style="margin-top:10px">
      <button class="btn primary" id="btnGen">âš¡ Generar</button>
      <button class="btn" id="btnReg">ğŸ”„ Regenerar</button>
      <button class="btn" id="btnClear">ğŸ§½ Limpiar</button>
    </div>

    <div class="row" style="margin-top:10px">
      <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="remember"> Recordar mis palabras en este dispositivo</label>
    </div>

    <div class="sep"></div>
    <h2>ğŸ§° Editor de bancos (opcional)</h2>
    <div class="small">AÃ±ade/edita tus listas para personalizar la â€œvozâ€ de la app. No hace falta tocarlas para empezar.</div>
    <label>Hooks (uno por lÃ­nea, usa {nicho} para insertar nicho)</label>
    <textarea id="bankHooks"></textarea>
    <label>Beneficios (uno por lÃ­nea)</label>
    <textarea id="bankBenefits"></textarea>
    <label>Pruebas sociales/atributos (uno por lÃ­nea)</label>
    <textarea id="bankProofs"></textarea>
    <label>Ofertas/aÃ±adidos (uno por lÃ­nea)</label>
    <textarea id="bankOffers"></textarea>
  </section>

  <section class="panel">
    <h2>ğŸ“ Resultados</h2>
    <div id="results" class="grid" style="grid-template-columns:1fr;gap:12px"></div>
    <div class="tools" style="margin-top:12px">
      <button class="btn" id="btnExport" disabled>â¬‡ï¸ Exportar .txt</button>
      <button class="btn" id="btnCopyAll" disabled>ğŸ“‹ Copiar todos</button>
    </div>
    <div class="footer">Consejo: prueba 2â€“3 variantes y quÃ©date con la que mÃ¡s comentarios/guardados genere.</div>
  </section>
</div>

<script>
// ===== Bancos por defecto (puedes ampliar) =====
const DEFAULT = {
  hooks: [
    "ğŸš€ Â¿Listo para subir de nivel con {nicho}?",
    "ğŸ˜‹ Antojo de {nicho}? Mira estoâ€¦",
    "ğŸ’¥ 10 segundos para convencerte con {nicho}.",
    "ğŸ¤¯ Lo que nadie te contÃ³ sobre {nicho}.",
    "âœ¨ Hoy te vas a enamorar de {nicho}.",
    "ğŸ”¥ Si vendes {nicho}, este mensaje es para ti.",
    "ğŸ§  El truco mÃ¡s simple para vender {nicho} hoy."
  ],
  benefits: [
    "calidad que se nota en cada detalle",
    "sabor que conquista el primer bocado",
    "hecho con cariÃ±o y enfoque en ti",
    "listo para alegrarte el dÃ­a",
    "precio honesto y justo",
    "experiencia que te hace volver",
    "textura irresistible y fresca"
  ],
  proofs: [
    "receta familiar", "ingredientes seleccionados", "clientes felices",
    "ediciÃ³n limitada", "hecho a mano", "frescura garantizada", "reseÃ±as 5â˜…"
  ],
  offers: [
    "hoy con entrega rÃ¡pida", "consulta combos y ahorra", "pregunta por el 2x1",
    "hay tamaÃ±o familiar y personal", "aceptamos pedidos por WhatsApp",
    "retira en el local", "envÃ­os en tu zona"
  ],
  ctasByGoal: {
    "vender hoy": ["Pide el tuyo hoy ğŸ›’","Haz tu pedido ahora ğŸ“²","Aprovecha antes de que se agote âš¡"],
    "generar comentarios": ["Comenta QUIERO y te envÃ­o la info ğŸ’¬","Escribe QUIERO y te paso la promo ğŸ‘‡","Â¿Te interesa? Di QUIERO"],
    "conseguir mensajes": ["EnvÃ­anos DM, te respondemos al instante ğŸ’¬","EscrÃ­benos y te guiamos paso a paso ğŸ“©"],
    "atraer visitas": ["Ven hoy y pruÃ©balo ğŸ“","Te esperamos en el local ğŸ‘‹"],
    "agendar pedidos": ["Agenda para hoy mismo ğŸ—“ï¸","Reserva en 30s â±ï¸"]
  },
  tones: {
    "cercano": ["contigo","hecho a tu medida","como en casa"],
    "energÃ©tico": ["vamos con todo","potencia tus dÃ­as","activa tu semana"],
    "elegante": ["detalle impecable","toque premium","estÃ©tica cuidada"],
    "divertido": ["modo antojo ON","nivel felicidad al 100%","spoiler: te encantarÃ¡"],
    "autoridad": ["garantÃ­a real","experiencia comprobada","confianza total"]
  }
};

// ===== Utilidades =====
const $ = s => document.querySelector(s);
const pick = arr => arr[Math.floor(Math.random()*arr.length)];
const unique = arr => [...new Set(arr)];
const cap = s => s.charAt(0).toUpperCase()+s.slice(1);
const clampWords = (text,max=60)=>{ const w=text.trim().split(/\s+/); return w.length<=max?text:w.slice(0,max).join(" ")+"â€¦"; };
const cleanList = t => unique((t||"").split(/\n/).map(s=>s.trim()).filter(Boolean));
const CSV = arr => arr.map((p,i)=>`Post #${i+1}\n${p}\n`).join("\n");

// Hashtags simples por nicho (hasta 5)
function buildHashtags(nicho){
  const base = ["#NegocioLocal","#HechoConAmor","#CompraSeguro","#PromoHoy","#Emprendedores"];
  const words = (nicho||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(/\W+/).filter(v=>v && v.length>2).slice(0,2);
  words.forEach(w=>base.push("#"+w));
  return unique(base).slice(0,5).join(" ");
}

// Generador principal (sin IA)
function generatePost({nicho, objetivo, tono, limit, banks, customWords}) {
  const hook = pick(banks.hooks).replace("{nicho}", nicho);
  const beneficio = pick(banks.benefits);
  const prueba = pick(banks.proofs);
  const oferta = pick(banks.offers);
  const tonoWord = pick(banks.tones[tono] || banks.tones["cercano"]);
  const cta = pick(banks.ctasByGoal[objetivo] || banks.ctasByGoal["vender hoy"]);
  let extra = "";

  if (customWords.length) {
    extra = " " + pick(customWords) + (Math.random()>0.6 ? " â€¢ " + pick(customWords) : "");
  }

  const cuerpo = `${cap(nicho)} con ${beneficio}, ${prueba} y ${tonoWord}. ${oferta}.${extra}`;
  const hashtags = buildHashtags(nicho);
  const full = clampWords(`${hook} ${cuerpo} ${cta} ${hashtags}`, limit);

  return { hook, cuerpo, cta, hashtags, full };
}

// Render
function render(posts){
  const wrap = $("#results"); wrap.innerHTML = "";
  posts.forEach((p,i)=>{
    const el = document.createElement("div");
    el.className="post";
    el.innerHTML = `
      <h3>Post #${i+1}</h3>
      <div class="muted"><b>Hook:</b> ${p.hook}</div>
      <div class="muted"><b>Texto:</b> ${p.cuerpo}</div>
      <div class="muted"><b>CTA:</b> ${p.cta}</div>
      <div class="muted"><b>Hashtags:</b> ${p.hashtags}</div>
      <div class="tools">
        <button class="btn" data-copy="${escapeHtml(p.full)}">ğŸ“‹ Copiar post</button>
        <button class="btn" data-copy="${escapeHtml(p.hashtags)}"># Copiar hashtags</button>
      </div>`;
    wrap.appendChild(el);
  });
  wrap.querySelectorAll("button").forEach(btn=>{
    btn.addEventListener("click", async ()=>{
      const t = unescapeHtml(btn.getAttribute("data-copy"));
      await navigator.clipboard.writeText(t);
      const old = btn.textContent; btn.textContent="âœ… Copiado"; setTimeout(()=>btn.textContent=old,1100);
    });
  });
  $("#btnExport").disabled = posts.length===0;
  $("#btnCopyAll").disabled = posts.length===0;
}
function escapeHtml(s){return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;");}
function unescapeHtml(s){return s.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&amp;","&");}

// Estado + bancos editables
let BANKS = structuredClone(DEFAULT);
function loadBanksToEditor(){
  $("#bankHooks").value    = DEFAULT.hooks.join("\n");
  $("#bankBenefits").value = DEFAULT.benefits.join("\n");
  $("#bankProofs").value   = DEFAULT.proofs.join("\n");
  $("#bankOffers").value   = DEFAULT.offers.join("\n");
}
function applyBanksFromEditor(){
  const hooks = cleanList($("#bankHooks").value) || DEFAULT.hooks;
  const benefits = cleanList($("#bankBenefits").value) || DEFAULT.benefits;
  const proofs = cleanList($("#bankProofs").value) || DEFAULT.proofs;
  const offers = cleanList($("#bankOffers").value) || DEFAULT.offers;
  BANKS = {
    hooks, benefits, proofs, offers,
    ctasByGoal: DEFAULT.ctasByGoal,
    tones: DEFAULT.tones
  };
}

let LAST_POSTS = [];
function run(generate=true){
  applyBanksFromEditor();
  const nicho = ($("#nicho").value||"tu producto estrella").trim();
  const objetivo = $("#objetivo").value;
  const tono = $("#tono").value;
  const cantidad = parseInt($("#cantidad").value,10) || 5;
  const limit = parseInt($("#limite").value,10) || 60;
  const custom = ($("#custom").value||"").split(",").map(s=>s.trim()).filter(Boolean);

  const posts = [];
  const seen = new Set();
  let guard = 0;
  while(posts.length < cantidad && guard < cantidad*10){
    guard++;
    const p = generatePost({nicho, objetivo, tono, limit, banks:BANKS, customWords:custom});
    if(!seen.has(p.full)){ posts.push(p); seen.add(p.full); }
  }
  LAST_POSTS = posts;
  render(posts);

  // recordar palabras personalizadas
  if($("#remember").checked){
    localStorage.setItem("lpa_custom_words", $("#custom").value||"");
  } else {
    localStorage.removeItem("lpa_custom_words");
  }
}

// Eventos UI
$("#btnGen").addEventListener("click", ()=> run(true));
$("#btnReg").addEventListener("click", ()=> run(true));
$("#btnClear").addEventListener("click", ()=>{
  ["nicho","custom"].forEach(id=>$("#"+id).value="");
  $("#results").innerHTML=""; $("#btnExport").disabled = true; $("#btnCopyAll").disabled = true;
});
$("#btnExport").addEventListener("click", ()=>{
  if(!LAST_POSTS.length) return;
  const text = CSV(LAST_POSTS.map(p=>p.full));
  const blob = new Blob([text],{type:"text/plain"}); const url = URL.createObjectURL(blob);
  const a = document.createElement("a"); a.href=url; a.download="posts_generados.txt"; a.click(); URL.revokeObjectURL(url);
});
$("#btnCopyAll").addEventListener("click", async ()=>{
  if(!LAST_POSTS.length) return;
  const text = LAST_POSTS.map((p,i)=>`Post #${i+1}\n${p.full}`).join("\n\n");
  await navigator.clipboard.writeText(text);
  const btn = $("#btnCopyAll"); const old = btn.textContent; btn.textContent="âœ… Copiado"; setTimeout(()=>btn.textContent=old,1100);
});

// Cargar bancos por defecto + recordar palabras
window.addEventListener("load", ()=>{
  loadBanksToEditor();
  const saved = localStorage.getItem("lpa_custom_words");
  if(saved) { $("#custom").value = saved; $("#remember").checked = true; }
  $("#nicho").value = "chocobananas artesanales";
  run(true);
});
</script>
</body>
</html>
